<!DOCTYPE HTML>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>klass tests</title>
    <link rel="stylesheet" href="../build/sink/src/sink.css" type="text/css" media="screen" title="no title" charset="utf-8">
    <script src="../build/sink/src/sink.js"></script>
    <script src="../klass.min.js"></script>
  </head>
  <body>
    <h1>Klass tests</h1>
    <ol id="tests"></ol>
    <script type="text/javascript">
      sink('Klass', function (test, ok, before, after) {
        var base;
        before(function () {
          base = klass(function (n) {
            this.n = n;
          });
        });

        test('should create a base class', 1, function () {
          ok((new base(5).n == 5), 'created base class');
        });

        test('should create methods', 1, function () {
          base.methods({
            get: function () {
              return this.n;
            }
          });
          ok((new base('hello').get() == 'hello'), 'created get() method');
        });

        test('should inherit from superclass when creating subclass', 1, function () {
          var sub = extend(base, klass(function (n) {}));
          ok((new sub('boosh').n == 'boosh'), 'inherits property from base');
        });

        test('should call super methods from sub methods', 5, function () {
          var methodTimes = 0;
          var constructTimes = 0;
          base
            .methods({
              bah: function () {
                ok(++methodTimes == 1, 'called base method first');
              }
            });

          var sub1 = extend(base, klass(function(){
            ok(++constructTimes == 1, 'called sub1 constructor first');
          }))
            .methods({
              bah: function() {
                this.supr();
                ok(++methodTimes == 2, 'called sub1 method second');
              }
            });

          var sub2 = extend(sub1, klass(function(){
            ok(++constructTimes == 2, 'called sub2 constructor second');
          }))
            .methods({
              bah: function () {
                this.supr();
                ok(++methodTimes == 3, 'called sub2 method third');
              }
            });
          (new sub2()).bah();
        });


      });
      start();
    </script>
  </body>
</html>